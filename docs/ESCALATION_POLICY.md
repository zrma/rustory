# Escalation Policy

- Audience: Rustory 유지보수자, LLM 에이전트
- Owner: Rustory
- Last Verified: 2026-02-19

이 문서는 LLM 에이전트 작업 중 사람(담당 개발자)에게 즉시 에스컬레이션해야 하는 조건을 정의한다.

## 기본 루프 (Harness)

1. Plan: 목표/범위/완료 기준을 문서화한다.
2. Act: 최소 변경 단위로 구현한다.
3. Verify: 테스트/검증 명령으로 결과를 확인한다.
4. Judge: 완료/재시도/에스컬레이션 중 하나를 선택한다.
5. Learn: 실패/누락은 `docs/LESSONS_LOG.md`에 남긴다.

## 즉시 에스컬레이션 조건

- 파괴적 VCS 작업 필요
  - 예: 히스토리 rewrite, force push, 대량 revert, 북마크 재정렬
- 운영 영향이 큰 변경
  - 예: 프로덕션 다운타임 가능성, 데이터 손실 가능성, 대규모 비용 증가 가능성
- 보안/권한/비밀정보 관련 작업
  - 예: 토큰/키 교체, 접근 권한 변경, 외부 공개 범위 변경
- 요구사항이 다의적이며 제품/정책 판단이 필요한 경우
  - 예: 문서 충돌에서 어느 쪽을 표준으로 할지 결정이 필요한 경우
- 2회 이상 재시도 후에도 실패 원인이 불명확한 경우
- 스크립트/문서 자동화가 기존 규칙과 충돌하는 경우
- `DEBUG_GATES_OVERRIDE`, `--allow-missing-work-id`, `ALLOW_NON_STRICT_PUSH_GATES` 같은 우회 옵션 사용이 필요한 경우

## 게이트 우회 변수 사용 규칙

- 우회 옵션은 기본 금지이며, 사람 승인 없이는 사용하지 않는다.
- 우회가 필요한 경우 사전에 위험/영향/복구 방법을 요약해 에스컬레이션 보고 포맷으로 승인받는다.
- 우회 실행 후 같은 턴에서 원인과 재발 방지책을 `docs/LESSONS_LOG.md` 또는 운영 문서/게이트 스크립트에 반영한다.

## 조건부 에스컬레이션 (요약 보고 후 진행)

- 로컬 개발 중 `dirty` 상태에서 검증만 수행하는 경우
- 비파괴적 문서 정리/경로 정리
- 가역적이고 영향 범위가 작은 리팩터링

## 에스컬레이션 보고 포맷

- 상황: 무엇이 막혔는지 1~2줄
- 위험: 그대로 진행하면 생기는 리스크
- 선택지: 최소 2개 (권장안 포함)
- 필요 결정: 사용자가 결정해야 하는 항목 1개
